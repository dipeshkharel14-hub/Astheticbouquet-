<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AstheticBouquet</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<style>
  *{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;}
  body{background:#f9f5f2;}
  canvas{border:1px solid #ccc;margin:10px auto;display:block;background:#fff;}
  #container{width:95%;max-width:1200px;margin:20px auto;text-align:center;}
  button{padding:10px 20px;margin:15px;font-size:16px;border:none;background:#ff5f5f;color:white;border-radius:8px;cursor:pointer;}
  button:disabled{background:#ccc;cursor:not-allowed;}
  .hidden{display:none;}
  .flower-selection{display:flex;flex-wrap:wrap;justify-content:center;gap:10px;margin-top:20px;}
  .flower-card{width:120px;text-align:center;cursor:pointer;border:2px solid transparent;border-radius:10px;padding:5px;}
  .flower-card.selected{border-color:#ff5f5f;background:#ffeaea;}
  img{width:100px;height:100px;object-fit:cover;border-radius:10px;}
  textarea{width:90%;max-width:600px;height:100px;margin:10px auto;padding:10px;font-size:16px;border-radius:10px;border:1px solid #ccc;display:block;}
  .share-buttons{margin-top:10px;}
</style>
</head>
<body>

<div id="container">

  <!-- Canvas 1: Sample Bouquet with Note -->
  <div id="canvas1">
    <canvas id="sampleCanvas" width="600" height="400"></canvas>
    <h2>AstheticBouquet</h2>
    <button id="createBtn1">Create üíê</button>
  </div>

  <!-- Canvas 2: Flower Selection -->
  <div id="canvas2" class="hidden">
    <h2>Select Your Flowers (Min 6, Max 10)</h2>
    <div class="flower-selection" id="flowerSelection"></div>
    <button id="nextBtn2" disabled>Next</button>
  </div>

  <!-- Canvas 3: Note Modification -->
  <div id="canvas3" class="hidden">
    <h2>Modify Your Note</h2>
    <textarea id="noteText">Dear Friend, Wishing you a wonderful day filled with happiness and love.</textarea>
    <button id="createBouquetBtn">Create Bouquet üíê</button>
  </div>

  <!-- Canvas 4: Final Bouquet with Sharing -->
  <div id="canvas4" class="hidden">
    <canvas id="finalCanvas" width="600" height="500"></canvas>
    <div class="share-buttons">
      <button id="shareTextBtn">Share via Text</button>
      <button id="shareEmailBtn">Share via Email</button>
    </div>
  </div>

</div>

<script>
const sampleCanvas = document.getElementById('sampleCanvas');
const ctxSample = sampleCanvas.getContext('2d');
const createBtn1 = document.getElementById('createBtn1');

const canvas1 = document.getElementById('canvas1');
const canvas2 = document.getElementById('canvas2');
const canvas3 = document.getElementById('canvas3');
const canvas4 = document.getElementById('canvas4');

const flowerSelectionDiv = document.getElementById('flowerSelection');
const nextBtn2 = document.getElementById('nextBtn2');
const noteText = document.getElementById('noteText');
const createBouquetBtn = document.getElementById('createBouquetBtn');
const finalCanvas = document.getElementById('finalCanvas');
const ctxFinal = finalCanvas.getContext('2d');
const shareTextBtn = document.getElementById('shareTextBtn');
const shareEmailBtn = document.getElementById('shareEmailBtn');

// Sample bouquet canvas
function drawSampleBouquet() {
    ctxSample.fillStyle = "#fff0f0";
    ctxSample.fillRect(0,0,600,400);
    ctxSample.fillStyle = "#ff5f5f";
    ctxSample.font = "bold 24px Poppins";
    ctxSample.fillText("AstheticBouquet", 200, 50);
    ctxSample.fillStyle = "#000";
    ctxSample.font = "16px Poppins";
    ctxSample.fillText("Sample Note: Wishing you happiness and love!", 50, 380);
    // Simple bouquet illustration
    ctxSample.beginPath();
    ctxSample.arc(300, 200, 60, 0, Math.PI*2);
    ctxSample.fillStyle = "#ffb6c1";
    ctxSample.fill();
    ctxSample.beginPath();
    ctxSample.moveTo(300,260);
    ctxSample.lineTo(300,350);
    ctxSample.strokeStyle = "#8b4513";
    ctxSample.lineWidth = 10;
    ctxSample.stroke();
}
drawSampleBouquet();

// Flower data (20 flowers)
const flowers = [
  {name:"Rose",img:"https://i.ibb.co/ZYW3VTp/brown-brim.png"},
  {name:"Lily",img:"https://i.ibb.co/1vgyXkL/lily.png"},
  {name:"Tulip",img:"https://i.ibb.co/7vX0ShX/tulip.png"},
  {name:"Sunflower",img:"https://i.ibb.co/5k6yghZ/sunflower.png"},
  {name:"Daisy",img:"https://i.ibb.co/NtS6dqG/daisy.png"},
  {name:"Orchid",img:"https://i.ibb.co/Y0V5Xr1/orchid.png"},
  {name:"Carnation",img:"https://i.ibb.co/ZYW3VTp/brown-brim.png"},
  {name:"Peony",img:"https://i.ibb.co/7vX0ShX/tulip.png"},
  {name:"Lavender",img:"https://i.ibb.co/Y0V5Xr1/orchid.png"},
  {name:"Marigold",img:"https://i.ibb.co/5k6yghZ/sunflower.png"},
  {name:"Jasmine",img:"https://i.ibb.co/NtS6dqG/daisy.png"},
  {name:"Gardenia",img:"https://i.ibb.co/1vgyXkL/lily.png"},
  {name:"Hydrangea",img:"https://i.ibb.co/ZYW3VTp/brown-brim.png"},
  {name:"Chrysanthemum",img:"https://i.ibb.co/7vX0ShX/tulip.png"},
  {name:"Iris",img:"https://i.ibb.co/Y0V5Xr1/orchid.png"},
  {name:"Forget-Me-Not",img:"https://i.ibb.co/5k6yghZ/sunflower.png"},
  {name:"Magnolia",img:"https://i.ibb.co/NtS6dqG/daisy.png"},
  {name:"Poppy",img:"https://i.ibb.co/1vgyXkL/lily.png"},
  {name:"Violet",img:"https://i.ibb.co/ZYW3VTp/brown-brim.png"},
  {name:"Camellia",img:"https://i.ibb.co/7vX0ShX/tulip.png"}
];

let selectedFlowers = [];

// Populate flower selection
flowers.forEach((f,idx)=>{
    const div = document.createElement('div');
    div.className="flower-card";
    div.innerHTML=`<img src="${f.img}" alt="${f.name}"><div>${f.name}</div>`;
    div.onclick = ()=>{
        if(div.classList.contains('selected')){
            div.classList.remove('selected');
            selectedFlowers = selectedFlowers.filter(x=>x!==idx);
        }else{
            if(selectedFlowers.length<10){
                div.classList.add('selected');
                selectedFlowers.push(idx);
            }
        }
        nextBtn2.disabled = selectedFlowers.length<6;
    };
    flowerSelectionDiv.appendChild(div);
});

// Navigation buttons
createBtn1.onclick = ()=>{
    canvas1.classList.add('hidden');
    canvas2.classList.remove('hidden');
};

nextBtn2.onclick = ()=>{
    canvas2.classList.add('hidden');
    canvas3.classList.remove('hidden');
};

createBouquetBtn.onclick = ()=>{
    canvas3.classList.add('hidden');
    canvas4.classList.remove('hidden');
    drawFinalBouquet();
};

// Draw final bouquet
function drawFinalBouquet(){
    ctxFinal.clearRect(0,0,600,500);
    ctxFinal.fillStyle = "#fff8f5";
    ctxFinal.fillRect(0,0,600,500);
    ctxFinal.fillStyle="#ff5f5f";
    ctxFinal.font="bold 24px Poppins";
    ctxFinal.fillText("AstheticBouquet", 200, 40);
    ctxFinal.font="16px Poppins";
    ctxFinal.fillStyle="#000";
    ctxFinal.fillText(noteText.value, 50, 460);
    ctxFinal.font="12px Poppins";
    ctxFinal.fillText("Made by: dipeshkharel.qzz.io | Powered by: mr_dipesh", 150, 480);

    // Random bouquet positions
    selectedFlowers.forEach((f,idx)=>{
        let x = 100 + (idx%5)*90;
        let y = 150 + Math.floor(idx/5)*80;
        let img = new Image();
        img.src = flowers[f].img;
        img.onload = ()=>{
            ctxFinal.drawImage(img, x, y, 80, 80);
        }
    });
}

// Sharing
shareTextBtn.onclick = ()=>{
    const shareContent = `Check my AstheticBouquet: ${noteText.value}`;
    navigator.clipboard.writeText(shareContent).then(()=>alert("Text copied to clipboard!"));
};

shareEmailBtn.onclick = ()=>{
    const subject = encodeURIComponent("My AstheticBouquet");
    const body = encodeURIComponent(noteText.value);
    window.location.href = `mailto:?subject=${subject}&body=${body}`;
};
</script>

</body>
</html>
